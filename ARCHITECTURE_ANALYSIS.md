# –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∞–¥–¥–æ–Ω–∞ SotA

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
```
1. WoW –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –≤ –ø–æ—Ä—è–¥–∫–µ TOC
2. sota-core.lua –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
3. WoW –∑–∞–≥—Ä—É–∂–∞–µ—Ç SavedVariables (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ ADDON_LOADED
5. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è SOTA_InitializeConfigSettings()
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SavedVariables
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω—ã –≤ `SOTA.toc` –≤ `## SavedVariables:`
- WoW –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ nil
- –í `SOTA_InitializeConfigSettings()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `== nil` –≤–º–µ—Å—Ç–æ `if not`, —á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π `0`

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (–∫—Ä–∏—Ç–∏—á–Ω–æ)

**–ú–µ—Å—Ç–æ:** `sota-core.lua:624` –∏ `sota-core.lua:631`

```lua
function SOTA_GetBossDKPList()
    if not SOTA_CONFIG_BossDKP or table.getn(SOTA_CONFIG_BossDKP) == 0 then
        SOTA_CONFIG_BossDKP = SOTA_CONFIG_DEFAULT_BossDKP;  -- ‚ùå –ü–†–û–ë–õ–ï–ú–ê
    end
    return SOTA_CONFIG_BossDKP;
end
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–µ—Ç —Å—Å—ã–ª–∫—É, –∞ –Ω–µ –∫–æ–ø–∏—é. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏—Ç `SOTA_CONFIG_BossDKP`, —ç—Ç–æ –∏–∑–º–µ–Ω–∏—Ç –∏ `SOTA_CONFIG_DEFAULT_BossDKP`, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–æ—Ç–µ—Ä–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É:
```lua
function SOTA_GetBossDKPList()
    if not SOTA_CONFIG_BossDKP or table.getn(SOTA_CONFIG_BossDKP) == 0 then
        -- –ö–ª–æ–Ω–∏—Ä—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        SOTA_CONFIG_BossDKP = {};
        for n=1, table.getn(SOTA_CONFIG_DEFAULT_BossDKP), 1 do
            SOTA_CONFIG_BossDKP[n] = { SOTA_CONFIG_DEFAULT_BossDKP[n][1], SOTA_CONFIG_DEFAULT_BossDKP[n][2] };
        end
    end
    return SOTA_CONFIG_BossDKP;
end
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ú–µ—Å—Ç–æ:** `sota-core.lua` –∏ `sota-options.lua`

- –í `sota-core.lua` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –í `sota-options.lua` –≤ `SOTA_InitializeConfigSettings()` —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ `nil` –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –≤ `sota-core.lua`, –∞ –≤ `SOTA_InitializeConfigSettings()` –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ `nil` (—á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ).

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–æ–¥–µ –Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `SOTA_ResetAllSettingsToDefault()`, —Ö–æ—Ç—è –∫–æ–º–∞–Ω–¥–∞ `/sota resetconfig` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `sota-dashboard.lua`.

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è, –∏ –µ—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—Ç—å –µ—ë.

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ–ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü

**–ú–µ—Å—Ç–æ:** `SOTA_GetBossDKPList()` –∏ `SOTA_GetItemDKPList()`

```lua
if not SOTA_CONFIG_BossDKP or table.getn(SOTA_CONFIG_BossDKP) == 0 then
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `SOTA_CONFIG_BossDKP` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `{ }` —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π), –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã.

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SOTA_CONFIG_Messages

**–ú–µ—Å—Ç–æ:** `sota-core.lua:131`

```lua
SOTA_CONFIG_Messages = nil;
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ, —á—Ç–æ `nil`, –Ω–æ –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `SOTA_VerifyEventMessages()` –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `SOTA_InitializeConfigSettings()`.

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 1. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–µ—Ñ–æ–ª—Ç–æ–≤

```lua
function SOTA_InitializeDefaults()
    -- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
    -- –≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
end
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–∫

```lua
function SOTA_ValidateConfig()
    -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    -- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
end
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª—É–±–æ–∫–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü

```lua
function SOTA_DeepCloneTable(source)
    -- –ì–ª—É–±–æ–∫–∞—è –∫–æ–ø–∏—è —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ—Ñ–æ–ª—Ç–æ–≤
end
```

### 4. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```lua
SOTA_CONFIG_VERSION = 1;  -- –í–µ—Ä—Å–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
-- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã - –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
```

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ê—Å–ø–µ–∫—Ç | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|--------|--------|-------------|
| –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ | ‚úÖ –•–æ—Ä–æ—à–æ | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | ‚úÖ –•–æ—Ä–æ—à–æ | SavedVariables —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ñ–æ–ª—Ç–æ–≤ | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ nil –∑–Ω–∞—á–µ–Ω–∏–π | ‚úÖ –•–æ—Ä–æ—à–æ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `== nil` |
| –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü | ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä—è–º–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è |

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

1. **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ `SOTA_GetBossDKPList()` –∏ `SOTA_GetItemDKPList()`
2. **–í–ê–ñ–ù–û:** –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç)
3. **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
4. **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–µ—Ñ–æ–ª—Ç–æ–≤
