# 🤖 Автоматическое начисление Boss DKP

## 💀 Новая логика кнопки "Raid Boss DKP"

### ⚡ Автоматический режим (рекомендуется)

**Настройка:** ✅ "Автоначисление DKP по зоне рейда" (включено)

**Как работает:**
```
1. Нажал 💀
2. Система определила зону: Naxxramas
3. Система определила Boss DKP: 1200
4. АВТОМАТИЧЕСКИ начислено 1200 DKP всем
5. В чат: "Автоначислено 1200 DKP за Naxxramas"
```

**БЕЗ ДИАЛОГОВ! Одна кнопка = начисление готово! ✅**

---

### 📝 Ручной режим

**Настройка:** ❌ "Автоначисление DKP по зоне рейда" (выключено)

**Как работает:**
```
1. Нажал 💀
2. Открывается диалог: "1200 Naxxramas"
3. Можешь изменить
4. "Начислить"
```

---

## 🎯 Примеры работы:

### Сценарий 1: В Naxx с автоначислением ✅
```
Настройка: ✅ Автоначисление
Иконка: 📕 Atiesh (Officer Notes)
Зона: Naxxramas

1. Убили Patchwerk
2. Нажал 💀
3. АВТОМАТИЧЕСКИ: всем +1200 DKP в Officer Notes
4. В чат: "Автоначислено 1200 DKP за Naxxramas"
5. Готово! ✅

Убили Grobbulus:
1. Нажал 💀
2. АВТОМАТИЧЕСКИ: +1200 DKP
3. Готово! ✅
```

**Скорость:** 1 клик = DKP начислено!

---

### Сценарий 2: В MC с автоначислением ✅
```
Настройка: ✅ Автоначисление
Иконка: 💎 Жемчужина (Public Notes)
Зона: Molten Core

1. Убили Lucifron
2. Нажал 💀
3. АВТОМАТИЧЕСКИ: всем +600 DKP в Public Notes
4. В чат: "Автоначислено 600 DKP за Molten Core"
```

---

### Сценарий 3: Несовпадение зоны и иконки ⚠️
```
Настройка: ✅ Автоначисление
Иконка: 📕 Atiesh (Officer Notes)
Зона: Molten Core (Public Notes зона!)

1. Нажал 💀
2. ПРЕДУПРЕЖДЕНИЕ:
   ┌────────────────────────────────────┐
   │ ВНИМАНИЕ!                          │
   │                                    │
   │ Ты в зоне: MC/Ony/BWL/AQ          │
   │ Но начислишь DKP в: Накс/Кара     │
   │                                    │
   │ Всё правильно?                     │
   ├────────────────────────────────────┤
   │ [Да, начислить]  [Отмена]         │
   └────────────────────────────────────┘

3. "Да" → АВТОМАТИЧЕСКИ +600 DKP в Officer Notes
4. Следующий раз в MC → БЕЗ предупреждения

Или:

3. "Отмена" → Нажал 💎 (переключил на Public)
4. Снова 💀 → АВТОМАТИЧЕСКИ +600 в Public ✅
```

---

### Сценарий 4: Вне рейда (Orgrimmar) 📝
```
Настройка: ✅ Автоначисление
Зона: Orgrimmar (НЕ рейд)

1. Нажал 💀
2. Открывается ДИАЛОГ: "100 "
3. Вводишь: "50 За посещаемость"
4. "Начислить"
```

**Почему диалог?** Система не может определить Boss DKP для этой зоны

---

### Сценарий 5: Ручной режим (для всех зон) 📝
```
Настройка: ❌ Автоначисление (выключено)
Зона: любая

1. Нажал 💀
2. ВСЕГДА открывается диалог
3. Вводишь вручную
4. "Начислить"
```

---

## ⚙️ Настройки:

### "Автоначисление DKP по зоне рейда"

**✅ Включено (рекомендуется):**
- В рейд-зонах: 1 клик = автоначисление ⚡
- Вне рейда: диалог с дефолтным значением
- **Быстро и удобно!**

**❌ Выключено:**
- Везде: диалог для ручного ввода
- **Больше контроля, но медленнее**

---

### "Проверка онлайна для начисления DKP"

**✅ Включено:**
- DKP получат только **онлайн** игроки

**❌ Выключено (у тебя):**
- DKP получат **все** (включая оффлайн в очереди)

---

## 🎯 Рекомендуемые настройки:

**Для быстрых рейдов:**
```
✅ Автоначисление по зоне рейда
❌ Проверка онлайна (всем DKP)
❌ Проверка зоны очереди (всем DKP)
```

**Результат:** Нажал 💀 → DKP начислено автоматически! ⚡

**Для строгих рейдов:**
```
❌ Автоначисление (ручной ввод)
✅ Проверка онлайна
✅ Проверка зоны очереди
```

**Результат:** Полный контроль, но медленнее

---

## 📊 Твои текущие настройки:

```
❌ Автоначисление по зоне рейда
❌ Проверка онлайна
❌ Проверка зоны очереди
```

**Рекомендация:** Включи "Автоначисление" для удобства! ✅
